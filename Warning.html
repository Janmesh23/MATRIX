<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Warning</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<style>
    @keyframes shake {
        0% {
            transform: translateY(0);
        }

        25% {
            transform: translateY(-5px);
        }

        50% {
            transform: translateY(5px);
        }

        75% {
            transform: translateY(-5px);
        }

        100% {
            transform: translateY(0);
        }
    }


    .warning-box {
        animation: shake 0.5s ease-in-out infinite;
    }

    .warning-box:hover {
        animation: none;
    }

    #Layer_1 {
        height: 10vw;
        width: 10vh;
        display: block;
        margin: auto;
        padding: auto;
    }
</style>

<body class="bg-gray-900 flex items-center justify-center h-screen">
    <div class="warning-box bg-red-600 text-white p-8 rounded-2xl shadow-lg text-center">
        <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 111.54">
            <defs>
                <style>
                    .cls-1 {
                        fill: #cf1f25;
                    }

                    .cls-2 {
                        fill: #fec901;
                        fill-rule: evenodd;
                    }

                    .cls-3 {
                        fill: #010101;
                    }
                </style>
            </defs>
            <title>warning</title>
            <path class="cls-1"
                d="M2.35,84.42,45.28,10.2l.17-.27h0A23,23,0,0,1,52.5,2.69,17,17,0,0,1,61.57,0a16.7,16.7,0,0,1,9.11,2.69,22.79,22.79,0,0,1,7,7.26q.19.32.36.63l42.23,73.34.24.44h0a22.48,22.48,0,0,1,2.37,10.19,17.63,17.63,0,0,1-2.17,8.35,15.94,15.94,0,0,1-6.93,6.6c-.19.1-.39.18-.58.26a21.19,21.19,0,0,1-9.11,1.75v0H17.61c-.22,0-.44,0-.65,0a18.07,18.07,0,0,1-6.2-1.15A16.42,16.42,0,0,1,3,104.24a17.53,17.53,0,0,1-3-9.57,23,23,0,0,1,1.57-8.74,7.66,7.66,0,0,1,.77-1.51Z" />
            <path class="cls-2"
                d="M9,88.75,52.12,14.16c5.24-8.25,13.54-8.46,18.87,0l42.43,73.69c3.39,6.81,1.71,16-9.33,15.77H17.61C10.35,103.8,5.67,97.43,9,88.75Z" />
            <path class="cls-3"
                d="M57.57,83.78A5.53,5.53,0,0,1,61,82.2a5.6,5.6,0,0,1,2.4.36,5.7,5.7,0,0,1,2,1.3,5.56,5.56,0,0,1,1.54,5,6.23,6.23,0,0,1-.42,1.35,5.57,5.57,0,0,1-5.22,3.26,5.72,5.72,0,0,1-2.27-.53A5.51,5.51,0,0,1,56.28,90a5.18,5.18,0,0,1-.36-1.27,5.83,5.83,0,0,1-.06-1.31h0a6.53,6.53,0,0,1,.57-2,4.7,4.7,0,0,1,1.14-1.56Zm8.15-10.24c-.19,4.79-8.31,4.8-8.49,0-.82-8.21-2.92-29.34-2.86-37.05.07-2.38,2-3.79,4.56-4.33a12.83,12.83,0,0,1,5,0c2.61.56,4.65,2,4.65,4.44v.24L65.72,73.54Z" />
        </svg>
        <h1 class="text-3xl font-bold mt-4">⚠️ Phishing Threat Detected!</h1>
        <p class="mt-2 text-lg">This website has been identified as suspicious. Your data may be at risk.</p>

        <div id="countdown" class="mt-4 text-xl font-semibold">Redirecting in 10 seconds...</div>

        <div class="mt-6">
            <button id="trust-site"
                class="bg-white text-red-600 px-6 py-2 rounded-lg text-lg font-semibold hover:bg-gray-100 transition">Trust
                This Site</button>
            <button id="leave-site"
                class="ml-4 bg-gray-800 px-6 py-2 rounded-lg text-lg font-semibold hover:bg-gray-700 transition">Leave
                Now</button>
        </div>
    </div>

    <script>
        let countdown = 10;
        const countdownElement = document.getElementById("countdown");
        const interval = setInterval(() => {
            countdown--;
            countdownElement.textContent = `Redirecting in ${countdown} seconds...`;

            if (countdown <= 0) {
                clearInterval(interval);
                window.parent.postMessage("block-site", "*");
            }
        }, 1000);

        document.getElementById("trust-site").addEventListener("click", () => {
            clearInterval(interval);
            window.parent.postMessage("trust-site", "*");
            chrome.storage.local.get({ trustedSites: [] }, (data) => {
                let trustedSites = data.trustedSites;
                trustedSites.push(new URL(document.referrer).hostname);
                chrome.storage.local.set({ trustedSites });
                window.location.href = document.referrer; // Allow user to continue
            });
        });

        document.getElementById("leave-site").addEventListener("click", () => {
            clearInterval(interval);
            window.parent.postMessage("block-site", "*");
        });
    </script>
</body>

</html>